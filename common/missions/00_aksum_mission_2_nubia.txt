aksum_mission_2_nubia = {
	header = "kush_mission_header"
	icon = "seleukid_3"

    repeatable = no

    chance = {}

    potential = {
    	primary_culture = aksumite
    	#has_completed_mission = aksum_mission_1_ethiopia
    	#NOT = { has_variable = aksum_mission_cooldown_2 }
    }

    abort = {}

    on_potential = {}

    on_start = {
    	start_mission_ai_effect = yes
    }

    on_abort = {
        custom_tooltip = general_mission_cooldown_tt
        set_variable = {
            name = aksum_mission_cooldown_2
            days = 7300
        }
    }

    aksum_mission_2_nubia_task_1 = { #Towards the Nile
        icon = "task_political"
        duration = 90

        allow = {
        	political_influence >= 25
        }

        on_completion = {
        	#claims on gash_area, atbaras_area, and kumuzia_area
        	custom_tooltip = aksum_mission_2_nubia_task_1_tt
        	show_as_tooltip = {
        		add_political_influence = -25
        	}
        }
    }

    aksum_mission_2_nubia_task_2 = {	#
        icon = "task_political"
        requires = { aksum_mission_2_nubia_task_1 }
        highlight = {
        	scope:province = {
        		is_in_area = gash_area
        	}
        }
        allow = {
        	owns_or_subject_owns_area = gash_area
        }

        on_completion = {
        	show_as_tooltip = {
        		current_ruler = { add_popularity = 10 }
        		p:8634 = {
        			state = {
        				add_state_modifier = {
        					name = aksumite_influence_state_mod
        					duration = -1
        				}
        			}
        		}
        	}
        }
    }

    aksum_mission_2_nubia_task_3 = {	#
        icon = "task_political"
        requires = { aksum_mission_2_nubia_task_1 }
        highlight = {
        	scope:province = {
        		is_in_area = atbaras_area
        	}
        }
        allow = {
        	owns_or_subject_owns_area = atbaras_area
        }

        on_completion = {
        	show_as_tooltip = {
        		random_province = {
        			limit = { is_in_area = atbaras_area }
        			while = {
        				count = 5
        				define_pop = {
	                        type = citizen
	                        culture = root.culture
	                        religion = root.religion        					
        				}
        			}
        		}
        	}
        }
    }

    aksum_mission_2_nubia_task_4 = {	#
        icon = "task_political"
        requires = { aksum_mission_2_nubia_task_1 }
        highlight = {
        	scope:province = {
        		is_in_area = kumuzia_area
        	}
        }
        allow = {
        	owns_or_subject_owns_area = kumuzia_area
        }

        on_completion = {
        	show_as_tooltip = {
        		add_2_free_province_investments = yes
        		add_stability = 5
        	}
        }
    }

    aksum_mission_2_nubia_task_5 = {	#Kushite Conflicts
        icon = "task_political"
        requires = {
        	aksum_mission_2_nubia_task_2
        	aksum_mission_2_nubia_task_3
        	aksum_mission_2_nubia_task_4
        }
        duration = 90
        highlight = {
        	scope:province = {
        		OR = {
        			is_in_area = kumuzia_area
        			is_in_area = atbaras_area
        			is_in_area = gash_area
        		}
        	}
        }
        allow = {
        	owns_or_subject_owns_area = kumuzia_area
        	owns_or_subject_owns_area = atbaras_area
        	owns_or_subject_owns_area = gash_area
        	political_influence >= 15
        }

        on_start = {
   			add_political_influence = -15
        }

        on_completion = {
        	#Gain Claims on nubia_region
        	custom_tooltip = aksum_mission_2_nubia_task_5_tt
        }
    }

    aksum_mission_2_nubia_task_6 = { #The End of Meroe
        icon = "task_political"
        requires = { aksum_mission_2_nubia_task_5 }
        highlight = {
        	scope:province = {
        		is_in_area = meroe_area
        	}
        }
        allow = {
        	owns_or_subject_owns_area = meroe_area
        }

        on_completion = {
        	show_as_tooltip = {
        		current_ruler = {
        			add_martial = 2
        		}
        		add_legitimacy = 10
        	}
        }
    }

    aksum_mission_2_nubia_task_7 = {	#The Land of the Bow
        icon = "task_political"
        requires = { 
        	aksum_mission_2_nubia_task_6
        	aksum_mission_2_nubia_task_8
        	aksum_mission_2_nubia_task_9
        }
        final = yes

        highlight = {
        	scope:province = {
        		is_in_region = nubia_region
        	}
        }

        allow = {
        	owns_or_subject_owns_region = nubia_region
        }

        on_completion = {
        	show_as_tooltip = {
        		add_country_modifier = {
        			name = masters_of_nubia_country_mod
        			duration = -1
        		}
        	}
        }
    }
    aksum_mission_2_nubia_task_8 = {	#
        icon = "task_political"
        requires = { aksum_mission_2_nubia_task_5 }
        highlight = {
        	scope:province = {
        		is_in_area = alut_area
        	}
        }
        allow = {
        	owns_or_subject_owns_area = alut_area
        }

        on_completion = {
        	
        }
    }
    aksum_mission_2_nubia_task_9 = {	#
        icon = "task_political"
        requires = { aksum_mission_2_nubia_task_5 }
        highlight = {
        	scope:province = {
        		OR = {
        			is_in_area = gezira_area
        			is_in_area = qadarif_area
        		}
        	}
        }
        allow = {
        	owns_or_subject_owns_area = gezira_area
        	owns_or_subject_owns_area = qadarif_area
        }

        on_completion = {}
    }
    aksum_mission_2_nubia_task_10 = {	#Kemetic Clashes
        icon = "task_political"
        highlight = {
        	scope:province = {
        		is_in_area = kumuzia_area
        	}
        }
        allow = {
        	custom_tooltip = {
        		text = aksum_mission_2_nubia_task_10_tt
	        	any_country_state = {
	        		count >= 2
	        		any_state_province = {
	        			percent >= 0.9
	        			dominant_province_religion = egyptian_pantheon
	        		}
	        	}
	        }
        }

        on_completion = {
        	show_as_tooltip = {
	        	add_country_modifier = {
	        		name = kemetic_clashes_country_mod
	        		duration = 9125
	        	}
	        	random_country_state = {
	        		limit = {
	        			any_state_province = {
		        			percent >= 0.9
		        			dominant_province_religion = egyptian_pantheon        				
	        			}
	        		}
	        		add_state_modifier = {
	        			name = aksumite_conversion_state_mod
	        			duration = 3650
	        		}
	        	}
	        }
        }
    }
    aksum_mission_2_nubia_task_11 = {	#Arabic Influence
        icon = "task_political"
        requires = { aksum_mission_2_nubia_task_10 }
        highlight = {
        	scope:province = {
        		OR = {
        			is_in_area = atbaras_area
        			is_in_area = kumuzia_area
        			is_in_area = gash_area
        		}
        	}
        }
        allow = {
        	#The 3 areas are at least 75% Arabic.
        }

        on_completion = {
        	show_as_tooltip = {
        		add_country_modifier = {
        			name = arabic_influence_country_mod
        			duration = -1
        		}
        	}
        }
    }
    aksum_mission_2_nubia_task_12 = {	#Aksumite Infrastructure
        icon = "task_political"
        highlight = {
        	scope:province = {
        		OR = {
        			is_in_area = kumuzia_area
        			is_in_area = atbaras_area
        			is_in_area = gash_area
        		}
        	}
        }
        allow = {
        	#The 3 areas have at least 50 buildings and 10 cities.
        }

        on_completion = {}
    }
    aksum_mission_2_nubia_task_13 = {	#Plains of Plenty
        icon = "task_political"
        requires = { aksum_mission_2_nubia_task_12 }
        highlight = {
        	scope:province = {
        		OR = {
        			is_in_area = qadarif_area
        			is_in_area = gezira_area
        			is_in_area = kartub_area
        		}
        	}
        }
        allow = {
        	#The qadarif area has 2 cities and 15 buildings.
        	# the gezira area has 2 cities and 15 buildings.
        	# the kartub area has 1 big city that has at least 5 buildings has 20 pops
        }

        on_completion = {}
    }
    aksum_mission_2_nubia_task_14 = {	#Merotic Machinations
        icon = "task_political"
        requires = { aksum_mission_2_nubia_task_13 }
        highlight = {
        	scope:province = {
        		OR = {
        			is_in_area = meroe_area
        			is_in_area = alut_area
        			is_in_area = hawad_area
        			is_in_area = awateib_area
        		}
        	}
        }
        allow = {
        	#The alut area has 2 cities and 2 province investments
        	#The awateib area produces at least 10 and has as many farming settlements as possible.
        	#The hawad area has 1 big city with at least 20 pops and 5 buildings
        	#Meroe is a metropolis.
        }

        on_completion = {}
    }
}